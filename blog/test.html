---
title: Contact Form with UPI QR Code
heading: गावः सुरभिर्नो मुर्धन
description: Submit your details and generate a UPI QR code for payment
---

<div class="contact-box" style="display: flex; justify-content: center; align-items: center;">
    <form id="paymentForm" onsubmit="submitForm(event)">
        <label for="name">Full Name</label>
        <input type="text" name="name" id="name" placeholder="Enter your name..." required />

        <label for="email">Email Address</label>
        <input type="email" name="email" id="email" placeholder="Enter your email..." required />

        <label for="adhar">Aadhar Number</label>
        <input type="text" name="adhar" id="adhar" placeholder="Enter your Aadhar..." required />

        <label for="text">Phone Number</label>
        <input type="text" name="phone" id="text" placeholder="Enter your phone number..." required />

        <label for="amount" style="display: none;">Donated for one Jeep Grass</label>
        <input type="text" name="amount" id="amount" value="6500" style="display: none;" />

        <input type="submit" value="Submit" />
    </form>

    <div id="confirmationMessage" style="display:none; color: green;">
        <br><br>Form submitted successfully! Kindly generate the QR and complete the payment
    </div>
</div>

<br><br><br>

<div style="text-align: center;">
    <button id="generateQrButton" class="pulse-button" style="background-color: #ffd500; padding: 15px 30px; font-size: 18px; 
           border: none; font-weight: bold; cursor: pointer; transition: all 0.3s ease-in-out; 
           color: #050829; border-radius: 8px;">
        Generate QR Code!
    </button>
</div>

<script>
    // Multiplication table 'd'
    var d = [
        [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
        [1, 2, 3, 4, 0, 6, 7, 8, 9, 5],
        [2, 3, 4, 0, 1, 7, 8, 9, 5, 6],
        [3, 4, 0, 1, 2, 8, 9, 5, 6, 7],
        [4, 0, 1, 2, 3, 9, 5, 6, 7, 8],
        [5, 9, 8, 7, 6, 0, 4, 3, 2, 1],
        [6, 5, 9, 8, 7, 1, 0, 4, 3, 2],
        [7, 6, 5, 9, 8, 2, 1, 0, 4, 3],
        [8, 7, 6, 5, 9, 3, 2, 1, 0, 4],
        [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
    ];

    // Permutation table 'p'
    var p = [
        [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
        [1, 5, 7, 6, 2, 8, 3, 0, 9, 4],
        [5, 8, 0, 3, 7, 9, 6, 1, 4, 2],
        [8, 9, 1, 6, 0, 4, 3, 5, 2, 7],
        [9, 4, 5, 3, 1, 2, 6, 8, 7, 0],
        [4, 2, 8, 6, 5, 7, 3, 9, 0, 1],
        [2, 7, 9, 3, 8, 0, 6, 4, 1, 5],
        [7, 0, 4, 6, 9, 1, 3, 2, 5, 8]
    ];

    // Inverse table 'inv'
    var inv = [0, 4, 3, 2, 1, 5, 6, 7, 8, 9];

    // Function to invert an array
    function invArray(array) {
        if (Object.prototype.toString.call(array) == "[object Number]") {
            array = String(array);
        }
        if (Object.prototype.toString.call(array) == "[object String]") {
            array = array.split("").map(Number);
        }
        return array.reverse();
    }

    // Function to generate checksum
    function generate(array) {
        var c = 0;
        var invertedArray = invArray(array);

        for (var i = 0; i < invertedArray.length; i++) {
            c = d[c][p[((i + 1) % 8)][invertedArray[i]]];
        }
        return inv[c];
    }

    // Function to validate checksum
    function validate(array) {
        var c = 0;
        var invertedArray = invArray(array);

        for (var i = 0; i < invertedArray.length; i++) {
            c = d[c][p[(i % 8)][invertedArray[i]]];
        }
        return (c === 0);
    }

    // Function to validate Aadhar number
    function validate_adhar(adhar) {
        console.clear();
        // Check if the Aadhar number is 12 digits
        if (adhar >= 100000000000 && adhar <= 999999999999) {
            if (validate(adhar) == false) {
                console.log("Invalid Aadhar Number");
                return false;
            } else {
                return true;
            }
        } else {
            console.log("Aadhar Number Should Be 12 Digits");
            return false;
        }
    }

    // Function to validate inputs and handle form submission
    function validateInputs() {
        const email = document.getElementById('email').value;
        const adhar = document.getElementById('adhar').value;
        const phone = document.getElementById('text').value;

        // Email validation (basic pattern)
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(email)) {
            alert("Please enter a valid email address.");
            return false;
        }

        // Aadhar validation
        if (!validate_adhar(adhar)) {
            alert("Please enter a valid Aadhar number.");
            return false;
        }

        // Phone number validation (10 digits only)
        const phonePattern = /^[6-9]\d{9}$/;

        if (!phonePattern.test(phone) || /^(\d)\1{9}$/.test(phone)) {
            alert("Please enter a valid 10-digit Indian mobile number.");
            return false;
        }

        return true;

    }




    let formSubmitted = false;


    function submitForm(event) {
        event.preventDefault(); // Prevent default form submission

        if (formSubmitted) {
            alert("You have already submitted the form.");
            return;
        }

        // Run validation before submission
        if (!validateInputs()) return;

        // Gather form data
        const formData = new FormData(document.getElementById("paymentForm"));
        const url = "https://script.google.com/macros/s/AKfycbwE3W4PdSfSve2DrhHPhXMq_7sj453UcSTqDTNjj3AtWduShhRZAk63o3JyIpUqLLrmOw/exec"; // Replace with your Google Apps Script URL

        // Send form data via fetch (AJAX)
        fetch(url, {
            method: "POST",
            body: formData
        })
            .then(response => response.text())
            .then(data => {
                // Show confirmation message
                formSubmitted = true;
                document.getElementById("confirmationMessage").style.display = "block";
                // Do not reset the form to retain values for QR code generation
            })

            .catch(error => {
                console.error("Error submitting form:", error);
            });
    }
</script>




<script>
    // Function to generate the UPI QR code or direct link based on the device type
    document.getElementById('generateQrButton').onclick = function () {
        const adharNumber = document.getElementById('adhar').value;

        const donorName = document.getElementById('name').value;
        const donorPhone = document.getElementById('text').value;
        const donorEmail = document.getElementById('email').value;

        if (!adharNumber) {
            alert("Please enter your Aadhar number.");
            return;
        }

        if (!donorEmail) {
            alert("Please enter your mail id!");
            return;
        }

        if (!donorName) {
            alert("Please enter your name!");
            return;
        }

        if (!donorPhone) {
            alert("Please enter your phone number!");
            return;
        }

        if (!formSubmitted) {
            alert("Please submit the form before generating the QR code.");
            return;
        }

        const amount = 11000;

        if (isNaN(amount) || amount <= 0) {
            alert("Invalid amount!");
            return;
        }

        // UPI data for QR code and link
        const upiData = `upi://pay?pa=govardhanylp@sbi&am=${amount}&cu=INR&tn=${adharNumber}`;
        const qrCodeUrl = `https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(upiData)}`;
        // Function to detect device type and proceed

        detectDeviceAndProceed();
        function detectDeviceAndProceed(amount, adharNumber, qrCodeUrl) {
            const userAgent = navigator.userAgent.toLowerCase();
            const isTouchScreen = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

            const isAndroid = () => /android/.test(userAgent);
            const isIphone = () =>
                /iphone|ipad|ipod/.test(userAgent) ||
                (isTouchScreen && /mac os x/.test(userAgent) && navigator.maxTouchPoints > 1);
            const isDesktop = () =>
                !isTouchScreen && (/windows/.test(userAgent) || /macintosh|mac os x/.test(userAgent));

            const upiData = `upi://pay?pa=govardhanylp@sbi&am=${amount}&cu=INR&tn=${adharNumber}`;

            if (isAndroid()) {
                console.log('Redirecting to Android UPI URL:', upiData);
                window.location.href = upiData;
            } else if (isIphone()) {
                console.log('Handling iOS UPI redirection');
                redirectToUPIAppOnIOS(adharNumber, amount);
            } else if (isDesktop()) {
                console.log('Displaying QR Code for Desktop:', qrCodeUrl);
                openQrWindow(qrCodeUrl);
            } else {
                console.log('Device not detected. Defaulting to QR Code.');
                openQrWindow(qrCodeUrl);
            }
        }


        function redirectToUPIAppOnIOS(adharNumber, amount) {
            const appLinks = [
                {
                    name: "Google Pay",
                    url: `tez://upi/pay?pa=govardhanylp@sbi&am=${amount}&tn=${adharNumber}&cu=INR`
                },
                {
                    name: "PhonePe",
                    url: `phonepe://pay?pa=govardhanylp@sbi&am=${amount}&tn=${adharNumber}&cu=INR`
                },
                {
                    name: "Paytm",
                    url: `paytmmp://upi/pay?pa=govardhanylp@sbi&am=${amount}&tn=${adharNumber}&cu=INR`
                },
                {
                    name: "BHIM",
                    url: `bhim://upi/pay?pa=govardhanylp@sbi&am=${amount}&tn=${adharNumber}&cu=INR`
                }
            ];

            showUPIAppPopup(appLinks);






            function showUPIAppPopup(appLinks) {
                // Create a container for the popup
                const popupContainer = document.createElement('div');
                popupContainer.id = 'upi-popup';
                popupContainer.style.position = 'fixed';
                popupContainer.style.top = '50%';
                popupContainer.style.left = '50%';
                popupContainer.style.transform = 'translate(-50%, -50%)';
                popupContainer.style.width = '300px';
                popupContainer.style.padding = '20px';
                popupContainer.style.backgroundColor = '#fff';
                popupContainer.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';
                popupContainer.style.borderRadius = '8px';
                popupContainer.style.zIndex = '1000';
                popupContainer.style.textAlign = 'center';

                // Add the heading
                const heading = document.createElement('h2');
                heading.textContent = 'Select a UPI App';
                heading.style.marginBottom = '20px';
                popupContainer.appendChild(heading);

                // Add app links dynamically
                const list = document.createElement('ul');
                list.style.listStyle = 'none';
                list.style.padding = '0';

                appLinks.forEach((app) => {
                    const listItem = document.createElement('li');
                    listItem.style.marginBottom = '10px';

                    const link = document.createElement('a');
                    link.href = app.url;
                    link.target = '_blank';
                    link.textContent = `Open in ${app.name}`;
                    link.style.textDecoration = 'none';
                    link.style.color = '#007bff';
                    link.style.fontSize = '16px';

                    listItem.appendChild(link);
                    list.appendChild(listItem);
                });

                popupContainer.appendChild(list);

                // Add a close button
                const closeButton = document.createElement('button');
                closeButton.textContent = 'Close';
                closeButton.style.marginTop = '20px';
                closeButton.style.padding = '10px 20px';
                closeButton.style.backgroundColor = '#007bff';
                closeButton.style.color = '#fff';
                closeButton.style.border = 'none';
                closeButton.style.borderRadius = '4px';
                closeButton.style.cursor = 'pointer';

                closeButton.onclick = function () {
                    document.body.removeChild(popupContainer);
                    document.body.removeChild(overlay);
                };

                popupContainer.appendChild(closeButton);

                // Add an overlay to dim the background
                const overlay = document.createElement('div');
                overlay.id = 'overlay';
                overlay.style.position = 'fixed';
                overlay.style.top = '0';
                overlay.style.left = '0';
                overlay.style.width = '100%';
                overlay.style.height = '100%';
                overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
                overlay.style.zIndex = '999';

                overlay.onclick = closeButton.onclick; // Close popup on overlay click

                // Append the popup and overlay to the body
                document.body.appendChild(overlay);
                document.body.appendChild(popupContainer);
            }





            // Function to open QR code in a new window
            function openQrWindow(qrCodeUrl) {
                const qrWindow = window.open('', '_blank', 'width=500,height=600');
                qrWindow.document.write(`
                     <html>
      <head>
        <title>UPI Payment QR Code</title>
      </head>
      <body style="display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0;">
        <div style="text-align: center;">
          <h2>Scan to Pay</h2>
          <div style="display: flex; flex-direction: column; align-items: center;">
            <img src="${qrCodeUrl}" alt="UPI Payment QR Code" style="width: 200px; height: 200px; margin-bottom: 10px;"/>
            <p>Scan this code to make the payment</p>
          </div>
        </div>
      </body>
    </html>
  `);
    }}}
    </script>