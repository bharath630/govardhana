---
title: Contact Form with UPI QR Code
heading: गावः सुरभिर्नो मुर्धन
description: Submit your details and generate a UPI QR code for payment
---

<div class="contact-box" style="display: flex; justify-content: center; align-items: center;">
  <form id="paymentForm" onsubmit="submitForm(event)">
    <label for="name">Full Name</label>
    <input type="text" name="name" id="name" placeholder="Enter your name..." required/>

    <label for="email">Email Address</label>
    <input type="email" name="email" id="email" placeholder="Enter your email..." required />

    <label for="adhar">Aadhar Number</label>
    <input type="text" name="adhar" id="adhar" placeholder="Enter your Aadhar..." required />

    <label for="text">Phone Number</label>
    <input type="text" name="phone" id="text" placeholder="Enter your phone number..." required />
    <input type="hidden" name="amount" value="2000" />

    <input type="submit" value="Submit" />
  </form>

  <div id="confirmationMessage" style="display:none; color: green;">
    <br><br>Form submitted successfully! Kindly generate the QR and complete the payment 
  </div>
</div>

<br><br><br>

<div style="text-align: center;">
  <button 
    id="generateQrButton"
    class="pulse-button"
    style="background-color: #ffd500; padding: 15px 30px; font-size: 18px; 
           border: none; font-weight: bold; cursor: pointer; transition: all 0.3s ease-in-out; 
           color: #050829; border-radius: 8px;">
    Generate QR Code!
  </button>
</div>

<script>
  // Verhoeff Algorithm for Aadhar number validation
  function verhoeffValidation(num) {
    const d = [
      [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
      [1, 2, 3, 4, 5, 6, 7, 8, 9, 0],
      [2, 3, 4, 5, 6, 7, 8, 9, 0, 1],
      [3, 4, 5, 6, 7, 8, 9, 0, 1, 2],
      [4, 5, 6, 7, 8, 9, 0, 1, 2, 3],
      [5, 6, 7, 8, 9, 0, 1, 2, 3, 4],
      [6, 7, 8, 9, 0, 1, 2, 3, 4, 5],
      [7, 8, 9, 0, 1, 2, 3, 4, 5, 6],
      [8, 9, 0, 1, 2, 3, 4, 5, 6, 7],
      [9, 0, 1, 2, 3, 4, 5, 6, 7, 8]
    ];

    const p = [
      [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
      [1, 2, 3, 4, 5, 6, 7, 8, 9, 0],
      [2, 3, 4, 5, 6, 7, 8, 9, 0, 1],
      [3, 4, 5, 6, 7, 8, 9, 0, 1, 2],
      [4, 5, 6, 7, 8, 9, 0, 1, 2, 3],
      [5, 6, 7, 8, 9, 0, 1, 2, 3, 4],
      [6, 7, 8, 9, 0, 1, 2, 3, 4, 5],
      [7, 8, 9, 0, 1, 2, 3, 4, 5, 6],
      [8, 9, 0, 1, 2, 3, 4, 5, 6, 7],
      [9, 0, 1, 2, 3, 4, 5, 6, 7, 8]
    ];

    const inv = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
    const c = [];

    let check = 0;
    num = num.split('').reverse();
    for (let i = 0; i < num.length; i++) {
      c[i] = parseInt(num[i]);
    }
    
    for (let i = 0; i < c.length; i++) {
      check = d[check][p[(i % 8)][c[i]]];
    }

    return check === 0;
  }

  // Function to validate input fields
  function validateInputs() {
    const email = document.getElementById('email').value;
    const adhar = document.getElementById('adhar').value;
    const phone = document.getElementById('text').value;
    
    // Email validation (basic pattern)
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailPattern.test(email)) {
      alert("Please enter a valid email address.");
      return false;
    }

    // Aadhar validation (Verhoeff algorithm)
    if (!verhoeffValidation(adhar)) {
      alert("Please enter a valid Aadhar number.");
      return false;
    }

    // Phone number validation (10 digits only)
    const phonePattern = /^\d{10}$/;
    if (!phonePattern.test(phone)) {
      alert("Please enter a valid 10-digit phone number.");
      return false;
    }

    return true;
  }

  // Function to generate the UPI QR code
  document.getElementById('generateQrButton').onclick = function() {
    const adharNumber = document.getElementById('adhar').value;
    
    if (!adharNumber) {
      alert("Please enter your Aadhar number.");
      return;
    }

    const amount = 2000;

    if (isNaN(amount) || amount <= 0) {
      alert("Invalid amount!");
      return;
    }

    const qrCodeUrl = `https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=upi%3A%2F%2Fpay%3Fpa%3Dgovardhanylp%40sbi%26am%3D${amount}%26cu%3DINR%26tn%3D${adharNumber}`;
    console.log("Generated QR Code URL:", qrCodeUrl);

    openQrWindow(qrCodeUrl);
  };

  // Function to open QR code in a new window
  function openQrWindow(qrCodeUrl) {
    const qrWindow = window.open('', '_blank', 'width=500,height=600');
    qrWindow.document.write(`
      <html>
        <head>
          <title>UPI Payment QR Code</title>
        </head>
        <body style="display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0;">
          <div style="text-align: center;">
            <h2>Scan to Pay</h2>
            <div style="display: flex; flex-direction: column; align-items: center;">
              <img src="${qrCodeUrl}" alt="UPI Payment QR Code" style="width: 200px; height: 200px; margin-bottom: 10px;">
              <p><strong>“गावो विश्वस्य मातर:”</strong></p>
            </div>
          </div>
        </body>
      </html>
    `);
    qrWindow.document.close();
  }

  function submitForm(event) {
    event.preventDefault();

    if (!validateInputs()) return;

    const formData = new FormData(document.getElementById("paymentForm"));
    const url = "https://script.google.com/macros/s/AKfycbyPXAL2fP2UQKyu50zZkBTMSN41N7LjoWQflSWIYReO3P1Lg3SBeEuoRJqboDLy2dX-Kw/exec";

    fetch(url, {
      method: "POST",
      body: formData
    })
    .then(response => response.text())
    .then(data => {
      document.getElementById("confirmationMessage").style.display = "block";
    })
    .catch(error => {
      console.error("Error submitting the form:", error);
    });
  }
</script>
